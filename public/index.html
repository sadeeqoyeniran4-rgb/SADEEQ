<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Luxury perfumes vendor - shop premium Arabian & designer fragrances.">
  <title>L√ìF√çND√Ä Perfumes</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link  rel="stylesheet"href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/some-library/button.min.css">
</head>
<body>
  <!-- ================= HEADER ================= -->
  <header>
    <nav>
      <div class="logo">
  <img src="lofinda2.png" alt="LOFINDA Logo">
</div>

      <ul class="nav-links" id="nav-links">
        <li><a href="#">Home</a></li>
        <li><a href="#" id="aboutBtn">About</a></li>
        <li><a href="#" id="contactBtn">Contact</a></li>
      </ul>
</nav>
      <div class="header-right">
  <button id="search-icon" class="icon-btn" title="Search">
    <i class="bi bi-search"></i>
  </button>

  <button id="cartBtn" class="cart-btn" title="Cart">
    <i class="bi bi-cart4"></i>
    <span id="cart-count">0</span>
  </button>

  <button class="hamburger icon-btn" id="menu-toggle" title="Menu">
    <i class="bi bi-list"></i>
  </button>
</div>

<div id="search-bar" class="search-bar hidden">
  <input type="text" id="search-input" placeholder="Search...">
  <button id="search-btn"><i class="bi bi-search"></i></button>
</div>

  </header>
  <!-- üè∑Ô∏è Discount Banner -->
<div id="discount-banner" class="discount-banner" style="display: none;">
  üéâ Enjoy <span id="discount-percentage">5%</span> OFF all items! Offer ends soon!
</div>
  <main>
    <!-- ================= HERO ================= -->
    <section id="home" class="hero">
      <div class="hero-text">
        <i><h1>YOUR SCENT, <br> YOUR MASTERPIECE...</h1></i>
        <button onclick="document.querySelector('#shop').scrollIntoView({behavior:'smooth'})">Shop Now</button>
      </div>
    </section>

    <!-- ================= SHOP ================= -->
    <section id="shop" class="products">
      <!-- Category Filter -->
  <div id="category-filter" style="text-align:center; margin-bottom:20px;">
  <button class="filter-btn active" data-category="all">All</button>
  <button class="filter-btn" data-category="designer-perfume">Designer Perfume</button>
  <button class="filter-btn" data-category="arabian-perfume">Arabian Perfume</button>
  <button class="filter-btn" data-category="body-spray">Body Spray</button>
  <button class="filter-btn" data-category="body-mist">Body Mist</button>
  <button class="filter-btn" data-category="roll-on-/antiperspirant">Roll-On / Antiperspirant</button>
  <button class="filter-btn" data-category="combo-set">Combo Set</button>
  <button class="filter-btn" data-category="perfume-oil">Perfume Oil</button>
  <button class="filter-btn" data-category="diffuser">Diffuser</button>
</div>
      <h2>Our Collection</h2>

      <div class="product-grid" id="product-grid">
        <!-- Products will be dynamically loaded here -->
      </div>
    </section>

    <!-- ================= ABOUT MODAL ================= -->
    <div id="about-modal" class="modal">
      <div class="modal-box">
        <span id="close-about" class="close">&times;</span>
        <h2 class="modal-title">About Us</h2>
        <p>At L·ªçÃÅf√≠nd√†, we know how powerful a scent can be ‚Äî it boosts your mood, your confidence, and your presence.
That‚Äôs why at L·ªçÃÅf√≠nd√†, we bring you high-quality Arabian and designer perfumes that turn heads and leave memories.
Whether you love something bold, sweet, or mysterious, we‚Äôve got a scent that fits your vibe perfectly.
<br>
L·ªçÃÅf√≠nd√† ‚Äî your scent, your masterpiece.</p>
      </div>
    </div>

    <!-- ================= CONTACT MODAL ================= -->
    <div id="contact-modal" class="modal">
      <div class="modal-box">
        <span id="close-contact" class="close">&times;</span>
        <h2 class="modal-title">Contact Us</h2>
        <form id="contactForm">
          <input type="text" id="contact-name" name="name" placeholder="Your Name" required>
          <input type="email" id="contact-email" name="email" placeholder="Your Email" required>
          <textarea id="message" name="message" placeholder="Your Message" required></textarea>
          <button type="submit" class="modal-btn">Send Message</button>
        </form>
        <div id="formResponse"></div>
      </div>
    </div>

    <!-- CART MODAL -->
<!-- üõçÔ∏è Cart Modal -->
<div id="cart-modal" class="cart-modal">
  <div class="cart-content">
    <div class="cart-header">
      <h3>Your Cart</h3>
      <button id="close-cart" class="close-cart" type="button">&times;</button>
    </div>

    <div id="cart-items" class="cart-items"></div>

    <div class="cart-footer">
      <p>Total: <span id="cart-total">‚Ç¶0</span></p>
      <button id="checkout-btn" class="checkout-btn" type="button">
        Proceed to Checkout
      </button>
    </div>
  </div>
</div> 

   <!-- ================= CHECKOUT MODAL ================= -->
    <div id="checkout-modal" class="modal">
      <div class="modal-box">
        <span class="close" id="checkout-close">&times;</span>
        <h2 class="modal-title">Checkout</h2>

        <form id="checkout-form" class="modal-form">
          <div class="form-group">
            <label for="checkout-name">Full Name</label>
            <input type="text" id="checkout-name" required>
          </div>

          <div class="form-group">
            <label for="checkout-email">Email</label>
            <input type="email" id="checkout-email" required>
          </div>

          <div class="form-group">
            <label for="checkout-phone">Phone Number</label>
            <input type="tel" id="checkout-phone" required>
          </div>

          <div class="form-group">
            <label for="address">Delivery Address</label>
            <textarea id="address" rows="3" required></textarea>
          </div>

          <div class="form-group">
            <label for="shipping">Shipping Method</label>
            <select id="shipping" required>
              <option value="">-- Select Shipping --</option>
              <option value="intra-state">Intra-State Delivery</option>
              <option value="inter-state">Inter-State Delivery</option>
              <option value="pickup">Pickup</option>
            </select>
          </div>

          <p class="checkout-total">
            <strong>Total: </strong><span id="checkout-total">‚Ç¶0</span>
          </p>

          <button type="submit" id="proceed-payment" class="modal-btn">
            Proceed to Payment
          </button>
        </form>
      </div>
    </div>
  </main>

  <!-- ================= FOOTER ================= -->
  <footer>
  <div class="footer-content">
    <p>&copy; 2025 L√ìF√çND√Ä Perfumes. All Rights Reserved.</p>
   <div class="social-links">
      <a href="https://instagram.com/lofinda.ng_shop" target="_blank" aria-label="Instagram">
        <i class="fab fa-instagram"></i>
      </a>
      <a href="https://tiktok.com/@lofinda.ng" target="_blank" aria-label="TikTok">
        <i class="fab fa-tiktok"></i>
      </a>
      <a href="https://wa.me/2347068716090" target="_blank" aria-label="WhatsApp">
        <i class="fab fa-whatsapp"></i>
      </a>
    </div>
  </div>
     <a href="admin.html" style="color: white; text-decoration: none;" id="adminLink">@</a>
  </footer>

  <script src="config.js"></script>
  <script>
    const hamburger = document.querySelector('.hamburger');
const navLinks = document.querySelector('.nav-links');

hamburger.addEventListener('click', () => {
  navLinks.classList.toggle('open');
});


    // Close menu when clicking a link
    document.querySelectorAll("#nav-links a").forEach(link => {
      link.addEventListener("click", () => {
        navLinks.classList.remove("open");
      });
    });
  </script>
<!-- ‚ùå Transaction Failed Modal -->
<div id="payment-failed-modal" class="modal">
  <div class="modal-content">
    <span class="close-btn" onclick="closeModal('payment-failed-modal')">&times;</span>
    <h2>‚ö†Ô∏è Payment Failed</h2>
    <p>Your transaction was not completed. Please try again.</p>
    <div class="modal-buttons">
      <button class="retry-btn" onclick="retryPayment()">üîÑ Retry Payment</button>
      <button class="close-btn-alt" onclick="closeModal('payment-failed-modal')">Close</button>
    </div>
  </div>
</div>

<style>
  /* Modal Styles */
  .modal {
    display: none;
    position: fixed;
    z-index: 9999;
    left: 0; top: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.6);
  }
  .modal-content {
    background: #fff;
    max-width: 400px;
    margin: 15% auto;
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  }
  .modal-content h2 {
    color: #b02956;
    margin-bottom: 10px;
  }
  .modal-content p {
    color: #333;
    font-size: 15px;
    margin-bottom: 20px;
  }
  .modal-buttons {
    display: flex;
    justify-content: center;
    gap: 15px;
  }
  .retry-btn {
    background: #2f1e3d;
    color: #fff;
    padding: 10px 20px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
  }
  .retry-btn:hover {
    background: #b02956;
  }
  .close-btn-alt {
    background: #777;
    color: #fff;
    padding: 10px 20px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
  }
  .close-btn-alt:hover {
    background: #555;
  }
  .close-btn {
    float: right;
    font-size: 22px;
    font-weight: bold;
    cursor: pointer;
    color: #666;
  }
  .close-btn:hover {
    color: #b02956;
  }
</style>

<script>
  function showModal(id) {
    document.getElementById(id).style.display = "block";
  }
  function closeModal(id) {
    document.getElementById(id).style.display = "none";
  }
</script>

<!-- ================= ADMIN LOGIN MODAL ================= -->
<div id="admin-login-modal" class="modal">
  <div class="modal-content">
    <span class="close-btn" onclick="closeModal('admin-login-modal')">&times;</span>
    <h2>üîê Admin Login</h2>
    <input type="password" id="adminPassword" placeholder="Enter Admin Password">
    <button onclick="checkAdminLogin()" class="modal-btn">Login</button>
    <p id="loginResponse" style="color:red; margin-top:10px;"></p>
  </div>
</div>

<!-- ================= ADMIN PRODUCT FORM (Hidden) ================= -->
<section id="admin" class="admin-panel" style="display:none;">
  <h2>Add New Product</h2>
  <form id="addProductForm">
    <div class="form-group">
      <label for="productName">Product Name</label>
      <input type="text" id="productName" name="name" required>
    </div>

    <div class="form-group">
      <label for="productDescription">Description</label>
      <textarea id="productDescription" name="description"></textarea>
    </div>

    <div class="form-group">
      <label for="productPrice">Price (‚Ç¶)</label>
      <input type="number" id="productPrice" name="price" required>
    </div>

    <div class="form-group">
      <label for="productImage">Image URL</label>
      <input type="url" id="productImage" name="image_url" placeholder="https://example.com/image.jpg">
    </div>

    <div class="form-group">
      <img id="imagePreview" src="" alt="Image Preview" style="max-width:150px; display:none; margin-top:10px;">
    </div>

    <button type="submit" class="modal-btn">Add Product</button>
  </form>

  <div id="adminResponse"></div>
</section>

<style>
  .modal {
    display: none;
    position: fixed;
    z-index: 9999;
    left: 0; top: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.6);
  }
  .modal-content {
    background: #fff;
    max-width: 350px;
    margin: 15% auto;
    padding: 20px;
    border-radius: 10px;
    text-align: center;
  }
  .modal-content input {
    width: 100%;
    padding: 10px;
    margin: 10px 0;
    border: 1px solid #ccc;
    border-radius: 6px;
  }
</style>

<script>
  // ------------------ LOGIN CHECK ------------------
  // Admin login is handled by the backend. This client-side helper opens the modal.
  function openAdminLogin() {
    showModal("admin-login-modal");
  }

  async function checkAdminLogin() {
    const enteredPassword = document.getElementById("adminPassword").value;
    try {
      const res = await fetch(`${window.API_BASE}/api/admin-login`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ password: enteredPassword })
      });
      const data = await res.json();
      if (data.success) {
        localStorage.setItem('adminToken', data.token);
        closeModal('admin-login-modal');
        document.getElementById('admin').style.display = 'block';
      } else {
        document.getElementById('loginResponse').textContent = '‚ùå Wrong password!';
      }
    } catch (err) {
      document.getElementById('loginResponse').textContent = '‚ùå Login error';
    }
  }

  // ------------------ FORM HANDLING ------------------
  const productImageInput = document.getElementById("productImage");
  const imagePreview = document.getElementById("imagePreview");

  productImageInput.addEventListener("input", () => {
    const url = productImageInput.value;
    if (url) {
      imagePreview.src = url;
      imagePreview.style.display = "block";
    } else {
      imagePreview.style.display = "none";
    }
  });

  document.getElementById("addProductForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    const product = {
      name: document.getElementById("productName").value,
      description: document.getElementById("productDescription").value,
      price: parseFloat(document.getElementById("productPrice").value),
      image_url: document.getElementById("productImage").value
    };

    try {
      const res = await fetch("https://lofinda-backend.onrender.com/api/products", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(product)
      });
      const data = await res.json();
      if (data.id) {
        document.getElementById("adminResponse").textContent = "‚úÖ Product added!";
        document.getElementById("addProductForm").reset();
        imagePreview.style.display = "none";
        if (typeof loadProducts === "function") loadProducts();
      } else {
        document.getElementById("adminResponse").textContent = "‚ùå Failed to add product.";
      }
    } catch (err) {
      console.error("Error adding product:", err);
      document.getElementById("adminResponse").textContent = "‚ùå Error saving product.";
    }
  });

  // Utility functions
  function showModal(id) {
    document.getElementById(id).style.display = "block";
  }
  function closeModal(id) {
    document.getElementById(id).style.display = "none";
  }

  async function handleAdminLogin(enteredPassword) {
  const res = await fetch("https://lofinda-backend.onrender.com/api/admin-login", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ password: enteredPassword })
  });

  const data = await res.json();
  if (data.success) {
    localStorage.setItem("adminToken", data.token);
    // show admin form
  } else {
    alert("Invalid password");
  }
}

const token = localStorage.getItem("adminToken");

async function addProduct(product, token) {
  try {
    const res = await fetch("https://lofinda-backend.onrender.com/api/products", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": `Bearer ${token}`
      },
      body: JSON.stringify(product)
    });

    const data = await res.json();

    if (res.ok) {
      console.log("‚úÖ Product added successfully:", data);
      alert("Product added successfully!");
      // You can also refresh product list here
    } else {
      console.error("‚ùå Failed to add product:", data);
      alert("Failed to add product. Please try again.");
    }
  } catch (err) {
    console.error("‚ö†Ô∏è Error adding product:", err);
    alert("An error occurred. Please try again.");
  }
}
</script>
<!-- ================= SCRIPTS ================= -->
  <script src="https://js.paystack.co/v1/inline.js"></script>
  <script type="module" src="app.js"></script>
<!-- Spinner Overlay -->
<div id="spinner-overlay" style="
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(255,255,255,0.8);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  display: none;">
  <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>

</body>
</html>
